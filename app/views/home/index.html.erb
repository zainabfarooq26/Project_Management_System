<div class="container-fluid">
  <nav class="navbar navbar-expand-lg bg-light shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="/">
        <h3 class="text-dark">Your Logo</h3>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" href="#">Member</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="#">Courses</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="#">Blog</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="#">Event</a>
          </li>
        </ul>
        <form class="d-flex">
          <% if user_signed_in? %>
            <!-- Profile Picture as a Button (Trigger Modal) -->
            <div class="d-flex align-items-center">
              <% if current_user.profile_photo.attached? %>
                <%= link_to '#', class: "btn btn-light rounded-circle p-0 profile-btn", data: { bs_toggle: "modal", bs_target: "#profileDetailsModal" } do %>
                  <%= image_tag(current_user.profile_photo, class: "rounded-circle", width: 40, height: 40) %>
                <% end %>
              <% else %>
                <%= link_to '#', class: "btn btn-light rounded-circle p-0 profile-btn", data: { bs_toggle: "modal", bs_target: "#profileDetailsModal" } do %>
                  <%= image_tag("default-avatar.png", class: "rounded-circle", width: 40, height: 40) %>
                <% end %>
              <% end %>
            </div>
            <!-- Sign Out Button -->
            <%= link_to "Sign Out", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn btn-outline-warning ms-2" %>
          <% else %>
            <!-- Sign Up and Login Links -->
            <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-outline-primary me-2" %>
            <%= link_to "Login", new_user_session_path, class: "btn btn-outline-success" %>
          <% end %>
        </form>
      </div>
    </div>
  </nav>
</div>

<!-- Modal to Show Profile Details -->
<div class="modal fade" id="profileDetailsModal" tabindex="-1" aria-labelledby="profileDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileDetailsModalLabel">Profile Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Card with Profile Details -->
        <div class="card shadow-sm border-light">
          <div class="card-body text-center">
            <% if current_user.profile_photo.attached? %>
              <%= image_tag(current_user.profile_photo, class: "rounded-circle mb-3", width: 120, height: 120) %>
            <% else %>
              <%= image_tag("default-avatar.png", class: "rounded-circle mb-3", width: 120, height: 120) %>
            <% end %>
            <!-- Display First Name and Last Name -->
            <h5 class="card-title font-weight-bold text-dark">
              <%= current_user.profile&.name%> 
            </h5>

            <p class="card-text text-muted">
              <strong>Email:</strong> <%= current_user.email %>
            </p>

            <!-- Display User Role (Admin, Manager, User) -->
            <p class="card-text">
              <strong>Role:</strong>
              <% if current_user.admin? %>
                <span class="badge bg-danger">Admin</span>
              <% elsif current_user.manager? %>
                <span class="badge bg-warning text-dark">Manager</span>
              <% else %>
                <span class="badge bg-secondary">User</span>
              <% end %>
            </p>

            <!-- Edit Profile Button -->
            <%= link_to 'Edit Profile', edit_profile_path(current_user), class: "btn btn-primary mt-3 px-4" %>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Include Bootstrap's JS for Modal Functionality -->
<%= javascript_include_tag "https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js", integrity: "sha384-k6RqeWeci5ZR/Lv4MR0sA6A57eegAwrjANPrc6wF/qFV7bE0JH07hPH2oTQZ7OYt", crossorigin: "anonymous" %>
