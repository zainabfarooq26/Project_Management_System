<h1 class="mb-4">Admin Management</h1>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Users List</h2>
</div>

<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>id</th>
      <th>Email</th>
      <th>Status</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each_with_index do |user, index| %>
      <tr id="user_<%= user.id %>">
        <td><%= index + 1 %></td>
        <td><%= user.email %></td>
        <td>
          <span class="badge <%= user.active ? 'bg-success' : 'bg-danger' %>">
            <%= user.active ? 'Active' : 'Inactive' %>
          </span>
        </td>
        <td>
          <span class="badge <%= user.is_manager? ? 'bg-info' : 'bg-secondary' %>">
            <%= user.is_manager? ? 'Manager' : 'User' %>
          </span>
        </td>
        <td>
          <div class="btn-group" role="group">
            <%= button_to (user.active ? 'Disable' : 'Enable'), 
                toggle_status_admin_user_path(user),
                method: :patch, 
                class: "btn btn-sm #{user.active ? 'btn-danger' : 'btn-success'} me-2",
                remote: true,
                data: { turbo_frame: "user_#{user.id}" } %>

            <%= button_to (user.is_manager? ? 'Remove Manager' : 'Give Manager'), 
                toggle_manager_admin_user_path(user),
                method: :patch, 
                class: 'btn btn-sm btn-warning me-2', 
                remote: true,
                data: { turbo_frame: "user_#{user.id}" } %>

            <%= link_to 'Edit', edit_admin_user_path(user), 
                class: 'btn btn-sm btn-info me-2' %>

            <%= button_to 'Delete', admin_user_path(user), 
                data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, 
                class: 'btn btn-sm btn-danger' %>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
