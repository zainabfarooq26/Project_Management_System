<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container-fluid">
    <!-- Navbar Title Based on User Role -->
    <a class="navbar-brand" href="#">
      <%= current_user.manager? ? "Manager Dashboard" : "Projects Assigned" %> <!-- Show appropriate title -->
    </a>
    <div class="d-flex align-items-center">
      <!-- Profile Button (Triggers Modal) -->
      <button class="btn btn-outline-light me-2" data-bs-toggle="modal" data-bs-target="#profileDetailsModal">
        Profile
      </button>
      <!-- Sign-Out Button -->
      <%= button_to 'Sign Out', destroy_user_session_path, method: :delete, class: 'btn btn-outline-light me-3' %>
    </div>
  </div>
</nav>

<!-- Include the Profile Modal -->
<%= render 'shared/profile_modal' %>

<h3 class="mb-3">Assigned Projects</h3>

<% if @projects.any? %>
  <ul class="list-group">
    <% @projects.each do |project| %>
      <li class="list-group-item d-flex justify-content-between">
        <div>
          <strong><%= project.title %></strong><br>
          <span class="text-muted">
          Assigned Users: <%= project.users.map { |user| user.first_name.present? ? "#{user.first_name} #{user.last_name}" : user.email }.join(", ") %>

          </span><br>
          <span class="text-muted">
          Assigned By: <%= project.manager&.first_name.present? ? "#{project.manager.first_name} #{project.manager.last_name}" : project.manager&.email %>
          </span>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No projects assigned to you.</p>
<%end%>
